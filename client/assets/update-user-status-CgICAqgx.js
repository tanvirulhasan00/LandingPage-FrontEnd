import{w as h}from"./with-props-DTHl7Add.js";import{v as c,w as p,q as x,z as v,r as g,n as e,x as f,t as j}from"./chunk-LSOULM7L-DPBAfQZR.js";import{b as w,D as b}from"./data--AoAQne8.js";import{B as N}from"./button-BHlA_b4V.js";import{I as D,L as y}from"./input-DgVKBx4z.js";const $=async({request:s,params:n})=>{const{userId:o}=n,r=localStorage.getItem("authToken");try{const a=await w(o,r);return{user:a==null?void 0:a.results}}catch(a){return c(`/dashboard/user?error=${a}`)}},P=async({request:s})=>{const n=localStorage.getItem("authToken"),o=await s.formData(),r=new FormData,a=o.get("userId");r.append("id",a),r.append("active",o.get("active"));try{const t=await b(r,n);return t.success?c("/dashboard/user"):c(`/dashboard/update-user-status/${a}?status=${t==null?void 0:t.statusCode}&&error=${t==null?void 0:t.message}`)}catch(t){return c(`/dashboard/update-user-status/${a}?error=${t}`)}},I=()=>{const{user:s}=p(),o=x().state==="submitting",[r,a]=v(),t=r.get("status"),i=r.get("error"),[d,u]=g.useState({id:s==null?void 0:s.id,active:s==null?void 0:s.active}),m=l=>{u({...d,[l.target.name]:l.target.value})};return e.jsxs("div",{className:"sm:w-[60%] w-[80%] m-auto",children:[e.jsxs("div",{hidden:!i,className:"bg-red-600 rounded-md p-1 mt-2",children:[e.jsx("h1",{children:t}),e.jsx("p",{children:i})]}),e.jsxs(f,{method:"post",encType:"multipart/form-data",children:[e.jsx(D,{hidden:!0,name:"userId",type:"text",value:d.id}),e.jsxs("div",{className:"sm:p-10",children:[e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"tracking-[2px] text-xl",children:e.jsx("h1",{children:"Deactivate User"})}),e.jsxs("div",{className:"w-full mt-5 rounded-md",children:[e.jsx(y,{htmlFor:"active",children:"Active Status"}),e.jsxs("select",{value:d.active,onChange:m,name:"active",className:"bg-white p-2 w-full text-black rounded-md",children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Deactivate"})]})]})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(N,{className:"w-full",children:[" ",o?"Updating...":"Update"]}),e.jsx(j,{to:"/dashboard/user",className:"w-full flex items-center justify-center border-1 rounded-md hover:border-red-700",children:"Cancel"})]})]})]})]})},F=h(I);export{P as clientAction,$ as clientLoader,F as default};
