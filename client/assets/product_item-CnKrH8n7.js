import{w as x,a as g}from"./with-props-DTHl7Add.js";import{v as l,p as j,n as e,w as f,q as v,r as N,z as y,x as I,t as P}from"./chunk-LSOULM7L-DPBAfQZR.js";import{a as w,U as b}from"./data--AoAQne8.js";import{I as d,L as m}from"./input-DgVKBx4z.js";import{B as C}from"./button-BHlA_b4V.js";async function k({request:t,params:s}){const o=localStorage.getItem("authToken"),c=localStorage.getItem("userId"),{productId:n}=s;try{const a=await w(Number(n),o,"product");return{product:a==null?void 0:a.results,userId:c}}catch(a){return{error:a}}}const B=async({request:t})=>{const s=await t.formData(),o=s.get("id"),c=s.get("userId"),n=s.get("imageUrl"),a=new FormData;a.append("id",o),a.append("userId",c),a.append("name",s.get("name")),a.append("color",s.get("color")),a.append("size",s.get("size")),a.append("price",s.get("price")),n instanceof File&&a.append("productImageUrl",n);const i=localStorage.getItem("authToken");try{const r=await b(a,i,"product");return r.success?l(`/dashboard/product?message=${r.message}&status=${r.statusCode}`):l(`/dashboard/product_item/${Number(o)}?error=${r.message}&status=${r.statusCode}`)}catch(r){return l(`/dashboard/product_item?error=${r}`)}},U=()=>{const{product:t,userId:s}=f(),c=v().state==="submitting",[n,a]=N.useState({name:t==null?void 0:t.name,color:t==null?void 0:t.color,size:t==null?void 0:t.size,price:t==null?void 0:t.price}),i=p=>{a({...n,[p.target.name]:p.target.value})},[r,z]=y();r.get("message");const h=r.get("status"),u=r.get("error");return e.jsxs("div",{className:"sm:w-[60%] w-[80%] m-auto max-sm:mt-5",children:[e.jsxs("div",{hidden:!u,className:"bg-red-600 rounded-md p-1 mt-2",children:[e.jsx("h1",{children:h}),e.jsx("p",{children:u})]}),e.jsxs(I,{method:"post",encType:"multipart/form-data",children:[e.jsx(d,{hidden:!0,name:"id",type:"number",value:t==null?void 0:t.id}),e.jsx(d,{hidden:!0,name:"userId",type:"text",value:s}),e.jsxs("div",{className:"sm:p-10",children:[e.jsx("h1",{className:"text-2xl",children:"Update Product"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(m,{children:"Product Name"}),e.jsx(d,{type:"text",name:"name",value:n.name,onChange:i})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(m,{children:"Product Color"}),e.jsx(d,{type:"text",name:"color",value:n.color,onChange:i})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(m,{children:"Product Size"}),e.jsx(d,{type:"text",name:"size",value:n.size,onChange:i})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(m,{children:"Product Price"}),e.jsx(d,{type:"text",name:"price",value:n.price,onChange:i})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(m,{children:"Product Image"}),e.jsx(d,{type:"file",name:"imageUrl",inputClassName:"cursor-pointer"})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(C,{className:"w-full",children:[" ",c?"Updating...":"Update"]}),e.jsx(P,{to:"/dashboard/product",className:"w-full flex items-center justify-center border-1 rounded-md hover:border-red-700",children:"Cancel"})]})]})]})]})},T=x(U),F=g(function({error:s}){let o="Oops!",c="An unexpected error occurred.";return j(s)&&(o=s.status===404?"404":"Error",c=s.status===404?"The requested page could not be found.":s.statusText||c),e.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[e.jsx("h1",{children:o}),e.jsx("p",{children:"Something went wrong!"})]})});export{F as ErrorBoundary,B as clientAction,k as clientLoader,T as default};
