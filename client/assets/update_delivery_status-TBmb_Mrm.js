import{w as c,a as i}from"./with-props-DTHl7Add.js";import{v as l,p as u,n as e,w as m,q as p,z as h,x,t as g}from"./chunk-LSOULM7L-DPBAfQZR.js";import{I as j,L as v}from"./input-DgVKBx4z.js";import{B as f}from"./button-BHlA_b4V.js";import{a as y,f as w}from"./data--AoAQne8.js";const D=async({request:a,params:t})=>{const r=localStorage.getItem("authToken"),{orderId:s}=t;return{orders:(await y(Number(s),r,"order")).results}},E=async({request:a})=>{const t=localStorage.getItem("authToken"),r=await a.formData(),s=r.get("orderId"),n=new FormData;n.append("id",s),n.append("status",r.get("deliveryStatus"));try{const o=await w(n,t);if(console.log(o),o.success)return l("/dashboard/order")}catch(o){return l(`/dashboard/update_delivery_status/${s}?error=${o}`)}},b=()=>{const{orders:a}=m();console.log("d",a);const r=p().state==="submitting",[s,n]=h();s.get("message");const o=s.get("status"),d=s.get("error");return e.jsxs("div",{className:"sm:w-[60%] w-[80%] m-auto max-sm:mt-5 ",children:[e.jsxs("div",{hidden:!d,className:"bg-red-600 rounded-md p-1 mt-2",children:[e.jsx("h1",{children:o}),e.jsx("p",{children:d})]}),e.jsxs(x,{method:"post",children:[e.jsx(j,{hidden:!0,name:"orderId",type:"text",value:a.id}),e.jsxs("div",{className:"sm:p-10",children:[e.jsx("h1",{className:"text-2xl",children:"Update Delivery Status"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(v,{children:"Delivery Status"}),e.jsxs("select",{name:"deliveryStatus",className:"border-1 border-gray-400 w-full rounded-md p-3",defaultValue:a.deliveryStatus,children:[e.jsx("option",{value:"In Process",children:"In Process"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(f,{className:"w-full",children:[" ",r?"Updating...":"Update"]}),e.jsx(g,{to:"/dashboard/order",className:"w-full flex items-center justify-center border-1 rounded-md hover:border-red-700",children:"Cancel"})]})]})]})]})},L=c(b),k=i(function({error:t}){let r="Oops!",s="An unexpected error occurred.";return u(t)&&(r=t.status===404?"404":"Error",s=t.status===404?"The requested page could not be found.":t.statusText||s),e.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[e.jsx("h1",{children:r}),e.jsx("p",{children:"Something went wrong!"})]})});export{k as ErrorBoundary,E as clientAction,D as clientLoader,L as default};
