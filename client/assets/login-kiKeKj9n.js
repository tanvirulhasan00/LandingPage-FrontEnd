import{w as d}from"./with-props-DTHl7Add.js";import{v as n,q as x,r as u,z as g,n as t,x as f}from"./chunk-LSOULM7L-DPBAfQZR.js";import{L as p}from"./data--AoAQne8.js";import{N as h}from"./notification-CQ38g674.js";import"./button-BHlA_b4V.js";async function k({request:i}){const s=localStorage.getItem("authToken");return s!==null?n("/dashboard"):{token:s}}async function L({request:i}){const s=await i.formData(),o=s.get("username"),a=s.get("password"),e=await p(o,a);try{return e!=null&&e.success?(localStorage.setItem("authToken",e==null?void 0:e.results.token),localStorage.setItem("userId",e==null?void 0:e.results.id),localStorage.setItem("userRole",e==null?void 0:e.results.role),n(`/dashboard?message=${e==null?void 0:e.message}&status=${e==null?void 0:e.statusCode}`)):n(`/login?message=${e==null?void 0:e.message}&status=${e==null?void 0:e.statusCode}`)}catch(r){return n(`/login?error=${r}`)}}function C({}){return[{title:"Landing Page | Login"},{name:"description",content:"Welcome to landign page login"}]}const y=()=>{const s=x().state==="submitting",[o,a]=u.useState(!0),[e,r]=g(),c=e.get("status"),l=e.get("error");u.useEffect(()=>{(l||c===void 0)&&a(!1)},[l]);const m=()=>{a(!o),r({})};return t.jsxs("div",{className:" flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[t.jsx(h,{open:o,statusCode:c||void 0,error:l||void 0,handleClick:m}),t.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[t.jsx("img",{alt:"Your Company",src:"/favicon.ico",className:"mx-auto h-20 w-auto"}),t.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900 dark:text-gray-100",children:"Login into your account"})]}),t.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:t.jsxs(f,{method:"POST",className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"username",className:"block text-sm/6 font-medium text-gray-900 dark:text-gray-100",children:"User Name"}),t.jsx("div",{className:"mt-2",children:t.jsx("input",{id:"username",name:"username",type:"text",required:!0,autoComplete:"username",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("label",{htmlFor:"password",className:"block text-sm/6 font-medium text-gray-900 dark:text-gray-100",children:"Password"})}),t.jsx("div",{className:"mt-2",children:t.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:s,children:s?"Loading...":"Login"})})]})})]})},S=d(y);export{L as clientAction,k as clientLoader,S as default,C as meta};
