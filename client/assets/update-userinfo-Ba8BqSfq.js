import{w as v}from"./with-props-DTHl7Add.js";import{v as c,w as b,q as w,z as U,r as p,n as e,x as C,t as y}from"./chunk-LSOULM7L-DPBAfQZR.js";import{B as I}from"./button-BHlA_b4V.js";import{T as F,D}from"./text-area-LeOmk-Rg.js";import{I as m,L as l}from"./input-DgVKBx4z.js";import{b as k,U as S}from"./data--AoAQne8.js";import{N as L}from"./notification-CQ38g674.js";const G=async()=>{const a=localStorage.getItem("authToken"),d=localStorage.getItem("userId");try{const s=await k(d,a);return console.log(""),{user:s==null?void 0:s.results}}catch(s){return c(`/dashboard?error=${s}`)}},M=async({request:a})=>{const d=localStorage.getItem("authToken"),s=await a.formData(),r=new FormData;r.append("id",s.get("userId")),r.append("userName",s.get("userName")),r.append("phoneNumber",s.get("phoneNumber")),r.append("address",s.get("address")),r.append("email",s.get("email"));const i=s.get("imageUrl");i instanceof File&&r.append("imageUrl",i);try{const t=await S(r,d,"user");return t.success?c("/dashboard"):c(`/dashboard/update-userinfo?status=${t==null?void 0:t.statusCode}&&error=${t==null?void 0:t.message}`)}catch(t){return c(`/dashboard/update-userinfo?error=${t}`)}},P=()=>{const{user:a}=b(),s=w().state==="submitting",[r,i]=U(),[t,x]=p.useState(!0),f=r.get("status"),u=r.get("error");p.useEffect(()=>{u&&x(!1)},[u]);const N=()=>{x(!t),i({})},[n,g]=p.useState({userName:a==null?void 0:a.userName,phoneNumber:a==null?void 0:a.phoneNumber,address:a==null?void 0:a.address,email:a==null?void 0:a.email}),h=o=>{g({...n,[o.target.name]:o.target.value})},j=o=>{g({...n,[o.target.name]:o.target.value})};return e.jsxs("div",{className:"sm:w-[60%] w-[80%] m-auto max-sm:mb-4",children:[e.jsx(L,{open:t,statusCode:f||void 0,error:u||void 0,handleClick:N}),e.jsxs(C,{method:"post",encType:"multipart/form-data",children:[e.jsx(m,{hidden:!0,name:"userId",type:"text",value:a==null?void 0:a.id}),e.jsxs("div",{className:"sm:p-10",children:[e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"tracking-[2px] text-xl",children:e.jsx("h1",{children:"Update User information"})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(l,{htmlFor:"userName",children:"User Name"}),e.jsx(m,{name:"userName",type:"text",value:n.userName,onChange:h})]}),e.jsxs("div",{className:"w-full mt-5",children:[e.jsx(l,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(m,{name:"phoneNumber",type:"text",value:n.phoneNumber,onChange:h})]}),e.jsxs("div",{className:"w-full mt-5",children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(F,{name:"address",value:n.address,onChange:j})]}),e.jsxs("div",{className:"w-full mt-5",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(m,{name:"email",type:"email",value:n.email,onChange:h})]}),e.jsxs("div",{className:"w-full mt-5",children:[e.jsx(l,{htmlFor:"imageUrl",children:"Image"}),e.jsx(m,{name:"imageUrl",type:"file",inputClassName:"cursor-pointer"})]}),e.jsx(D,{className:"mt-10"})]})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(I,{className:"w-full",children:[" ",s?"Updating...":"Update"]}),e.jsx(y,{to:"/dashboard",className:"w-full flex items-center justify-center border-1 rounded-md hover:border-red-700",children:"Cancel"})]})]})]})]})},O=v(P);export{M as clientAction,G as clientLoader,O as default};
