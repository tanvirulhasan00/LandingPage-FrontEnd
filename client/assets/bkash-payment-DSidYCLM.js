import{w as r,a as c}from"./with-props-DTHl7Add.js";import{v as i,p as l,n as e,w as u,q as m,x as d}from"./chunk-LSOULM7L-DPBAfQZR.js";import{g,h}from"./data--AoAQne8.js";const y=async({request:n})=>({totalAmount:new URL(n.url).searchParams.get("total")}),k=async({request:n})=>{const a=await n.formData(),t=await g();if((t==null?void 0:t.statusMessage)==="Successful"){console.log("bToken",t),localStorage.setItem("bkashToken",t.id_token);const o={amount:a.get("total"),token:t.id_token},s=await h(o);if((s==null?void 0:s.statusMessage)==="Successful")return console.log("createBkash",s),i(s.bkashURL)}return""},x=()=>{const{totalAmount:n}=u(),a=parseFloat(n||""),t=new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT"}).format(a),s=m().state==="submitting";return e.jsx("main",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs(d,{method:"post",children:[e.jsx("input",{id:"total",name:"total",hidden:!0,value:Number(n)}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-10 max-w-lg w-full text-center",children:[e.jsx("img",{src:"/BKash.png",className:" bg-gray-200 rounded-lg mx-auto mb-4"}),e.jsx("span",{className:"text-center text-red-600",children:t}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Pay With Bkash."}),e.jsx("button",{disabled:s,type:"submit",className:"inline-block bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-full transition cursor-pointer",children:s?"Loading...":"Pay now"})]})]})})},w=r(x),j=c(function({error:a}){let t="Oops!",o="An unexpected error occurred.";return l(a)&&(t=a.status===404?"404":"Error",o=a.status===404?"The requested page could not be found.":a.statusText||o),e.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[e.jsx("h1",{children:t}),e.jsx("p",{children:"Something went wrong!"})]})});export{j as ErrorBoundary,k as clientAction,y as clientLoader,w as default};
