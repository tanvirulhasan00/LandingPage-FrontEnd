import{w as i,a as m}from"./with-props-DTHl7Add.js";import{n as t,v as u,p,w as g,A as h,y as x,q as f,z as b,r as y,t as j}from"./chunk-LSOULM7L-DPBAfQZR.js";import{B as w}from"./button-BHlA_b4V.js";import{T as I}from"./table-NR0rbp1q.js";import{c as N,d as k}from"./data--AoAQne8.js";const v=[{key:"productImageUrl",label:"Image",render:s=>t.jsx("img",{src:s,alt:"image",className:"w-[5rem] h-[6rem] rounded-md object-cover"})},{key:"name",label:"Name",render:s=>t.jsx("span",{className:"font-semibold",children:s})},{key:"color",label:"Color"},{key:"size",label:"Size"},{key:"price",label:"Price",render:s=>{const e=parseFloat(s),a=new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT"}).format(e);return t.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:a})}}];async function L({request:s}){const e=localStorage.getItem("authToken"),a=localStorage.getItem("userId"),o=localStorage.getItem("userRole"),r=await N(e,"product",o=="user"?a:"all");return{product:r==null?void 0:r.results}}async function R({request:s}){const e=localStorage.getItem("authToken"),o=(await s.formData()).get("productId"),r=await k(Number(o),e,"product");return r.success?u(`/dashboard/product?message=${r.message}&status=${r.statusCode}`):u(`/dashboard/product?error=${r.message}&status=${r.statusCode}`)}const P=()=>{const{product:s}=g(),e=h(),a=x(),r=f().state==="loading",d=c=>{e(`/dashboard/product_item/${c}`)},l=c=>{a.submit({productId:c.toString()},{method:"post"})},[n,S]=b();return n.get("message"),n.get("status"),n.get("error"),y.useEffect(()=>{},[r]),t.jsxs("div",{className:"p-10",children:[t.jsxs("div",{className:"flex justify-between mb-5 text-2xl p-1",children:[t.jsx("h1",{children:"Product List"}),t.jsx(j,{to:"/dashboard/create_product",children:t.jsx(w,{children:"Add Product"})})]}),t.jsx(I,{columns:v,rows:s,show:"product",handleUpdate:d,handleDelete:l})]})},$=i(P),C=m(function({error:e}){let a="Oops!",o="An unexpected error occurred.";return p(e)&&(a=e.status===404?"404":"Error",o=e.status===404?"The requested page could not be found.":e.statusText||o),t.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[t.jsx("h1",{children:a}),t.jsx("p",{children:"Something went wrong!"})]})});export{C as ErrorBoundary,R as clientAction,L as clientLoader,$ as default};
