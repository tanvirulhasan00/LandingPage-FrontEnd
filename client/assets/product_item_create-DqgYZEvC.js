import{w as l,a as u}from"./with-props-DTHl7Add.js";import{v as m,p,n as e,w as x,q as h,z as g,x as j,t as f}from"./chunk-LSOULM7L-DPBAfQZR.js";import{e as N}from"./data--AoAQne8.js";import{I as n,L as d}from"./input-DgVKBx4z.js";import{B as y}from"./button-BHlA_b4V.js";async function S({request:c,params:s}){return{userId:localStorage.getItem("userId")}}const E=async({request:c})=>{const s=await c.formData(),r=s.get("imageUrl"),a=s.get("userId"),o=new FormData;o.append("userId",a),o.append("name",s.get("name")),o.append("color",s.get("color")),o.append("size",s.get("size")),o.append("price",s.get("price")),r instanceof File&&o.append("productImageUrl",r);const i=localStorage.getItem("authToken");try{const t=await N(o,i,"product");return t.success?m(`/dashboard/product?message=${t.message}&status=${t.statusCode}`):m(`/dashboard/create_product?error=${t.message}&status=${t.statusCode}`)}catch(t){return m(`/dashboard/create_product?error=${t}`)}},I=()=>{const{userId:c}=x(),s=h(),r=s.state==="submitting";s.state;const[a,o]=g();a.get("message");const i=a.get("status"),t=a.get("error");return e.jsxs("div",{className:"sm:w-[60%] w-[80%] m-auto max-sm:mt-5",children:[e.jsxs("div",{hidden:!t,className:"bg-red-600 rounded-md p-1 mt-2",children:[e.jsx("h1",{children:i}),e.jsx("p",{children:t})]}),e.jsxs(j,{method:"post",encType:"multipart/form-data",children:[e.jsx(n,{hidden:!0,name:"userId",type:"text",value:c}),e.jsxs("div",{className:"sm:p-10",children:[e.jsx("h1",{className:"text-2xl",children:"Create Product"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(d,{children:"Product Name"}),e.jsx(n,{type:"text",name:"name"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(d,{children:"Product Color"}),e.jsx(n,{type:"text",name:"color"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(d,{children:"Product Size"}),e.jsx(n,{type:"text",name:"size"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(d,{children:"Product Price"}),e.jsx(n,{type:"text",name:"price"})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(d,{children:"Product Image"}),e.jsx(n,{type:"file",name:"imageUrl",inputClassName:"cursor-pointer"})]}),e.jsxs("div",{className:"mt-5 flex gap-3",children:[e.jsxs(y,{className:"w-full",children:[" ",r?"Creating...":"Create"]}),e.jsx(f,{to:"/dashboard/product",className:"w-full flex items-center justify-center border-1 rounded-md hover:border-red-700",children:"Cancel"})]})]})]})]})},z=l(I),B=u(function({error:s}){let r="Oops!",a="An unexpected error occurred.";return p(s)&&(r=s.status===404?"404":"Error",a=s.status===404?"The requested page could not be found.":s.statusText||a),e.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[e.jsx("h1",{children:r}),e.jsx("p",{children:"Something went wrong!"})]})});export{B as ErrorBoundary,E as clientAction,S as clientLoader,z as default};
